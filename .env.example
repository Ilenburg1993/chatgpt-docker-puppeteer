# Environment Configuration Template for Production
# Copy to .env and fill with actual values

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================

NODE_ENV=production
PORT=3008
LOG_LEVEL=info

# Application version (for tagging)
VERSION=2.0.0

# =============================================================================
# CHROME CONFIGURATION
# =============================================================================

# Chrome WebSocket endpoint
# Docker Desktop (Windows/Mac): ws://host.docker.internal:9222
# Linux: ws://localhost:9222 (with extra_hosts in docker-compose)
# Remote: ws://192.168.1.100:9222
CHROME_WS_ENDPOINT=ws://host.docker.internal:9222

# Chrome remote debugging port
CHROME_REMOTE_DEBUGGING_PORT=9222

# Skip Chromium download (we use system Chrome)
PUPPETEER_SKIP_CHROMIUM_DOWNLOAD=true

# Chrome executable path (optional, for local development)
# CHROME_EXECUTABLE_PATH=/usr/bin/google-chrome

# =============================================================================
# DIRECTORIES & VOLUMES
# =============================================================================

# Base data directory (for named volumes in production)
DATA_DIR=./data

# Queue directory
QUEUE_DIR=./fila

# Response output directory
RESPONSE_DIR=./respostas

# Log files directory
LOG_DIR=./logs

# Browser profile directory
PROFILE_DIR=./profile

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================

# Maximum concurrent tasks
MAX_WORKERS=3

# Browser pool size
BROWSER_POOL_SIZE=3

# Memory limit in MB (for PM2 auto-restart)
MEMORY_LIMIT=2048

# Garbage collection interval in ms
GC_INTERVAL=300000

# Task timeout in milliseconds
TASK_TIMEOUT=30000

# Maximum retry attempts per task
MAX_RETRIES=3

# Queue scan interval in ms
QUEUE_SCAN_INTERVAL=5000

# Kernel cycle interval in ms (default: 50ms = 20Hz)
KERNEL_CYCLE_INTERVAL=50

# =============================================================================
# SECURITY
# =============================================================================

# API authentication key (leave empty to disable)
API_KEY=

# CORS allowed origins (comma-separated)
CORS_ORIGIN=http://localhost:3008,https://yourdomain.com

# Enable API authentication
ENABLE_AUTH=false

# JWT secret (if using authentication)
# JWT_SECRET=your-super-secret-jwt-key-change-this

# =============================================================================
# MONITORING & TELEMETRY
# =============================================================================

# Enable telemetry collection
ENABLE_TELEMETRY=false

# Sentry DSN for error tracking (optional)
# SENTRY_DSN=https://xxx@sentry.io/xxx

# Prometheus metrics port
PROMETHEUS_PORT=9090

# Health check endpoint
HEALTH_CHECK_ENABLED=true

# =============================================================================
# LOGGING
# =============================================================================

# Maximum log file size in bytes (10MB)
LOG_MAX_SIZE=10485760

# Maximum number of log files to keep
LOG_MAX_FILES=5

# Enable log compression
LOG_COMPRESS=true

# Log format (json|text)
LOG_FORMAT=text

# =============================================================================
# DATABASE (if applicable in future)
# =============================================================================

# DATABASE_URL=postgresql://user:password@localhost:5432/chatgpt_agent
# REDIS_URL=redis://localhost:6379

# =============================================================================
# THIRD-PARTY INTEGRATIONS
# =============================================================================

# OpenAI API Key (if using API instead of browser automation)
# OPENAI_API_KEY=sk-xxx

# Slack webhook for notifications (optional)
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/xxx

# Discord webhook (optional)
# DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/xxx

# =============================================================================
# ADVANCED SETTINGS
# =============================================================================

# Timezone for timestamps
TZ=America/Sao_Paulo

# Enable debug mode
DEBUG=false

# Graceful shutdown timeout in ms
SHUTDOWN_TIMEOUT=10000

# Enable experimental features
EXPERIMENTAL_FEATURES=false

# NERV buffer size
NERV_BUFFER_SIZE=1000

# NERV telemetry
NERV_TELEMETRY=true

# Allocation strategy (round-robin|least-load)
ALLOCATION_STRATEGY=round-robin

# Health check interval in ms
HEALTH_CHECK_INTERVAL=30000

# =============================================================================
# DOCKER-SPECIFIC
# =============================================================================

# Docker network subnet (for docker-compose.prod.yml)
DOCKER_SUBNET=172.25.0.0/16

# Grafana admin password
GRAFANA_PASSWORD=admin

# =============================================================================
# CHROME STARTUP REFERENCE
# =============================================================================

# Windows:
# "C:\Program Files\Google\Chrome\Application\chrome.exe" --remote-debugging-port=9222 --user-data-dir="C:\chrome-automation-profile"

# macOS:
# "/Applications/Google Chrome.app/Contents/MacOS/Google Chrome" --remote-debugging-port=9222 --user-data-dir="~/chrome-automation-profile"

# Linux:
# google-chrome --remote-debugging-port=9222 --user-data-dir="~/chrome-automation-profile"

# Additional Chrome flags (optional):
# --disable-gpu
# --no-sandbox
# --disable-dev-shm-usage
# --disable-setuid-sandbox

# =============================================================================
# NETWORKING & PORTS
# =============================================================================

# Server URL (base URL for API/Dashboard)
SERVER_URL=http://localhost:3008

# Health check endpoint
HEALTH_CHECK_URL=http://localhost:3008/api/health

# Port hunting configuration
ENABLE_PORT_HUNTING=true
MAX_PORT_ATTEMPTS=5

# Chrome connection configuration
CHROME_CONNECTION_TIMEOUT=5000
CHROME_CONNECTION_RETRIES=3
CHROME_FALLBACK_PORTS=9222,9223,9224

# =============================================================================
# NOTES
# =============================================================================

# 1. Copy this file to .env: cp .env.example .env
# 2. Update values according to your environment
# 3. Never commit .env to version control (.gitignore protects it)
# 4. Use .env.local for local overrides (also gitignored)
# 5. Restart application after changes: make restart or make restart-prod
# 6. Validate configuration: npm run test:config

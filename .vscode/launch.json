{
  "version": "0.2.0",
  "configurations": [
    // =========================================================================
    // MAIN SYSTEM - Enhanced with advanced debugging features
    // =========================================================================
    {
      "type": "node",
      "request": "launch",
      "name": "üöÄ Debug Agente (Enhanced)",
      "skipFiles": [
        "<node_internals>/**",
        "node_modules/**"
      ],
      "program": "${workspaceFolder}/index.js",
      "runtimeArgs": [
        "--max-old-space-size=2048",
        "--expose-gc"
      ],
      "sourceMaps": true,
      "resolveSourceMapLocations": [
        "${workspaceFolder}/**",
        "!**/node_modules/**"
      ],
      "autoAttachChildProcesses": true,
      "smartStep": true,
      "showAsyncStacks": true,
      "trace": false,
      "env": {
        "NODE_ENV": "development",
        "LOG_LEVEL": "debug",
        "DEBUG": "nerv:*,kernel:*,driver:*",
        "FORCE_COLOR": "1"
      },
      "console": "integratedTerminal",
      "outputCapture": "std",
      "internalConsoleOptions": "neverOpen"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "üìä Debug Dashboard (Enhanced)",
      "skipFiles": [
        "<node_internals>/**",
        "node_modules/**"
      ],
      "program": "${workspaceFolder}/src/server/main.js",
      "runtimeArgs": [
        "--max-old-space-size=1024"
      ],
      "sourceMaps": true,
      "resolveSourceMapLocations": [
        "${workspaceFolder}/**",
        "!**/node_modules/**"
      ],
      "autoAttachChildProcesses": true,
      "smartStep": true,
      "showAsyncStacks": true,
      "env": {
        "NODE_ENV": "development",
        "PORT": "3008",
        "LOG_LEVEL": "debug",
        "DEBUG": "server:*",
        "FORCE_COLOR": "1"
      },
      "console": "integratedTerminal",
      "outputCapture": "std"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "üîß Debug Agente (Production Mode)",
      "skipFiles": [
        "<node_internals>/**",
        "node_modules/**"
      ],
      "program": "${workspaceFolder}/index.js",
      "runtimeArgs": [
        "--max-old-space-size=2048"
      ],
      "sourceMaps": true,
      "env": {
        "NODE_ENV": "production",
        "LOG_LEVEL": "info"
      },
      "console": "integratedTerminal",
      "outputCapture": "std"
    },
    // =========================================================================
    // SUBSYSTEMS - Specific debugging for each major component
    // =========================================================================
    {
      "type": "node",
      "request": "launch",
      "name": "üß† Debug NERV Subsystem",
      "skipFiles": [
        "<node_internals>/**",
        "node_modules/**"
      ],
      "program": "${workspaceFolder}/index.js",
      "runtimeArgs": [
        "--max-old-space-size=2048"
      ],
      "sourceMaps": true,
      "autoAttachChildProcesses": true,
      "showAsyncStacks": true,
      "env": {
        "NODE_ENV": "development",
        "LOG_LEVEL": "debug",
        "DEBUG": "nerv:*,nerv:emit:*,nerv:receive:*,nerv:buffer:*"
      },
      "console": "integratedTerminal",
      "outputCapture": "std"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "‚öôÔ∏è Debug Kernel Engine",
      "skipFiles": [
        "<node_internals>/**",
        "node_modules/**"
      ],
      "program": "${workspaceFolder}/index.js",
      "runtimeArgs": [
        "--max-old-space-size=2048"
      ],
      "sourceMaps": true,
      "autoAttachChildProcesses": true,
      "showAsyncStacks": true,
      "env": {
        "NODE_ENV": "development",
        "LOG_LEVEL": "debug",
        "DEBUG": "kernel:*,execution:*,policy:*,runtime:*"
      },
      "console": "integratedTerminal",
      "outputCapture": "std"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "üéÆ Debug Driver (ChatGPT/Gemini)",
      "skipFiles": [
        "<node_internals>/**",
        "node_modules/**"
      ],
      "program": "${workspaceFolder}/index.js",
      "runtimeArgs": [
        "--max-old-space-size=2048"
      ],
      "sourceMaps": true,
      "autoAttachChildProcesses": true,
      "showAsyncStacks": true,
      "env": {
        "NODE_ENV": "development",
        "LOG_LEVEL": "debug",
        "DEBUG": "driver:*,puppeteer:*",
        "PUPPETEER_HEADLESS": "false"
      },
      "console": "integratedTerminal",
      "outputCapture": "std"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "üåä Debug Browser Pool",
      "skipFiles": [
        "<node_internals>/**",
        "node_modules/**"
      ],
      "program": "${workspaceFolder}/index.js",
      "runtimeArgs": [
        "--max-old-space-size=2048"
      ],
      "sourceMaps": true,
      "autoAttachChildProcesses": true,
      "showAsyncStacks": true,
      "env": {
        "NODE_ENV": "development",
        "LOG_LEVEL": "debug",
        "DEBUG": "pool:*,connection:*,health:*"
      },
      "console": "integratedTerminal",
      "outputCapture": "std"
    },
    // =========================================================================
    // CRITICAL SCENARIOS - Pre-configured for specific debugging cases
    // =========================================================================
    {
      "type": "node",
      "request": "launch",
      "name": "üîß Debug Boot Sequence",
      "skipFiles": [
        "<node_internals>/**",
        "node_modules/**"
      ],
      "program": "${workspaceFolder}/src/main.js",
      "runtimeArgs": [
        "--max-old-space-size=2048"
      ],
      "sourceMaps": true,
      "stopOnEntry": true,
      "autoAttachChildProcesses": true,
      "showAsyncStacks": true,
      "env": {
        "NODE_ENV": "development",
        "LOG_LEVEL": "debug",
        "DEBUG": "boot:*,config:*,identity:*"
      },
      "console": "integratedTerminal",
      "outputCapture": "std"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "üí• Debug Crash Recovery",
      "skipFiles": [
        "<node_internals>/**",
        "node_modules/**"
      ],
      "program": "${workspaceFolder}/index.js",
      "runtimeArgs": [
        "--max-old-space-size=2048"
      ],
      "sourceMaps": true,
      "autoAttachChildProcesses": true,
      "showAsyncStacks": true,
      "env": {
        "NODE_ENV": "development",
        "LOG_LEVEL": "debug",
        "DEBUG": "forensics:*,recovery:*,failure:*"
      },
      "console": "integratedTerminal",
      "outputCapture": "std"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "üîí Debug Lock Contention",
      "skipFiles": [
        "<node_internals>/**",
        "node_modules/**"
      ],
      "program": "${workspaceFolder}/index.js",
      "runtimeArgs": [
        "--max-old-space-size=2048"
      ],
      "sourceMaps": true,
      "autoAttachChildProcesses": true,
      "showAsyncStacks": true,
      "env": {
        "NODE_ENV": "development",
        "LOG_LEVEL": "debug",
        "DEBUG": "lock:*,orphan:*,contention:*"
      },
      "console": "integratedTerminal",
      "outputCapture": "std"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "üìä Debug Memory Profiling",
      "skipFiles": [
        "<node_internals>/**",
        "node_modules/**"
      ],
      "program": "${workspaceFolder}/index.js",
      "runtimeArgs": [
        "--max-old-space-size=2048",
        "--expose-gc",
        "--inspect-brk=9229"
      ],
      "sourceMaps": true,
      "autoAttachChildProcesses": true,
      "showAsyncStacks": true,
      "env": {
        "NODE_ENV": "development",
        "LOG_LEVEL": "info",
        "DEBUG": "memory:*,gc:*"
      },
      "console": "integratedTerminal",
      "outputCapture": "std",
      "port": 9229
    },
    // =========================================================================
    // TESTING - Enhanced test debugging configurations
    // =========================================================================
    {
      "type": "node",
      "request": "launch",
      "name": "üß™ Debug Current Test File",
      "skipFiles": [
        "<node_internals>/**",
        "node_modules/**"
      ],
      "program": "${file}",
      "cwd": "${workspaceFolder}",
      "runtimeArgs": [
        "--max-old-space-size=1024"
      ],
      "sourceMaps": true,
      "autoAttachChildProcesses": true,
      "showAsyncStacks": true,
      "env": {
        "NODE_ENV": "test",
        "LOG_LEVEL": "debug"
      },
      "console": "integratedTerminal"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "üß™ Debug All Tests",
      "skipFiles": [
        "<node_internals>/**",
        "node_modules/**"
      ],
      "program": "${workspaceFolder}/scripts/run-tests.js",
      "runtimeArgs": [
        "--max-old-space-size=1024"
      ],
      "sourceMaps": true,
      "autoAttachChildProcesses": true,
      "env": {
        "NODE_ENV": "test",
        "LOG_LEVEL": "info"
      },
      "console": "integratedTerminal"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "üß™ Debug P1-P5 Fixes Tests",
      "skipFiles": [
        "<node_internals>/**",
        "node_modules/**"
      ],
      "program": "${workspaceFolder}/tests/test_p1_fixes.js",
      "runtimeArgs": [
        "--max-old-space-size=1024"
      ],
      "sourceMaps": true,
      "autoAttachChildProcesses": true,
      "showAsyncStacks": true,
      "env": {
        "NODE_ENV": "test",
        "LOG_LEVEL": "debug"
      },
      "console": "integratedTerminal"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "üß™ Debug Driver Integration Tests",
      "skipFiles": [
        "<node_internals>/**",
        "node_modules/**"
      ],
      "program": "${workspaceFolder}/tests/test_driver_nerv_integration.js",
      "runtimeArgs": [
        "--max-old-space-size=1024"
      ],
      "sourceMaps": true,
      "autoAttachChildProcesses": true,
      "showAsyncStacks": true,
      "env": {
        "NODE_ENV": "test",
        "LOG_LEVEL": "debug",
        "DEBUG": "driver:*,nerv:*"
      },
      "console": "integratedTerminal"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "üß™ Debug Launcher Integration Tests",
      "skipFiles": [
        "<node_internals>/**",
        "node_modules/**"
      ],
      "program": "${workspaceFolder}/tests/integration/test_launcher_integration.js",
      "runtimeArgs": [
        "--max-old-space-size=1024"
      ],
      "sourceMaps": true,
      "autoAttachChildProcesses": true,
      "env": {
        "NODE_ENV": "test",
        "LOG_LEVEL": "debug"
      },
      "console": "integratedTerminal"
    },
    // =========================================================================
    // ATTACH - Enhanced attachment configurations with retry and multi-port
    // =========================================================================
    {
      "type": "node",
      "request": "attach",
      "name": "üìå Attach to PM2 Process",
      "port": 9229,
      "restart": true,
      "skipFiles": [
        "<node_internals>/**",
        "node_modules/**"
      ],
      "localRoot": "${workspaceFolder}",
      "remoteRoot": "${workspaceFolder}",
      "protocol": "inspector",
      "sourceMaps": true,
      "resolveSourceMapLocations": [
        "${workspaceFolder}/**",
        "!**/node_modules/**"
      ],
      "autoAttachChildProcesses": true,
      "showAsyncStacks": true
    },
    {
      "type": "node",
      "request": "attach",
      "name": "üìå Attach PM2 (Alternative Port 9230)",
      "port": 9230,
      "restart": true,
      "skipFiles": [
        "<node_internals>/**",
        "node_modules/**"
      ],
      "localRoot": "${workspaceFolder}",
      "remoteRoot": "${workspaceFolder}",
      "protocol": "inspector",
      "sourceMaps": true,
      "autoAttachChildProcesses": true
    },
    {
      "type": "node",
      "request": "attach",
      "name": "üê≥ Attach to Docker Container",
      "port": 9229,
      "address": "localhost",
      "restart": false,
      "skipFiles": [
        "<node_internals>/**",
        "node_modules/**"
      ],
      "localRoot": "${workspaceFolder}",
      "remoteRoot": "/app",
      "sourceMaps": true,
      "resolveSourceMapLocations": [
        "${workspaceFolder}/**",
        "!**/node_modules/**"
      ],
      "autoAttachChildProcesses": true,
      "showAsyncStacks": true
    },
    {
      "type": "node",
      "request": "attach",
      "name": "üê≥ Attach Docker (Alternative Port 9230)",
      "port": 9230,
      "address": "localhost",
      "restart": false,
      "skipFiles": [
        "<node_internals>/**",
        "node_modules/**"
      ],
      "localRoot": "${workspaceFolder}",
      "remoteRoot": "/app",
      "sourceMaps": true,
      "autoAttachChildProcesses": true
    }
  ],
  // ===========================================================================
  // COMPOUND CONFIGURATIONS - Debug multiple processes simultaneously
  // ===========================================================================
  "compounds": [
    {
      "name": "üöÄ Full System Debug (Agent + Dashboard)",
      "configurations": [
        "üöÄ Debug Agente (Enhanced)",
        "üìä Debug Dashboard (Enhanced)"
      ],
      "stopAll": true,
      "preLaunchTask": null
    },
    {
      "name": "üß™ Complete Test Suite",
      "configurations": [
        "üß™ Debug P1-P5 Fixes Tests",
        "üß™ Debug Driver Integration Tests"
      ],
      "stopAll": true
    },
    {
      "name": "üîç Full Subsystems Debug",
      "configurations": [
        "üß† Debug NERV Subsystem",
        "‚öôÔ∏è Debug Kernel Engine",
        "üéÆ Debug Driver (ChatGPT/Gemini)"
      ],
      "stopAll": true
    },
    {
      "name": "‚ö° Critical Path Debug (Boot + NERV + Kernel)",
      "configurations": [
        "üîß Debug Boot Sequence",
        "üß† Debug NERV Subsystem",
        "‚öôÔ∏è Debug Kernel Engine"
      ],
      "stopAll": true
    }
  ]
}

{
  "version": "0.2.0",
  "configurations": [
    {
      "type": "node",
      "request": "launch",
      "name": "üöÄ Debug Agente (Enhanced)",
      "program": "${workspaceFolder}/index.js",
      "runtimeArgs": ["--max-old-space-size=2048", "--expose-gc"],
      "skipFiles": ["<node_internals>/**", "node_modules/**"],
      "sourceMaps": true,
      "resolveSourceMapLocations": ["${workspaceFolder}/**", "!**/node_modules/**"],
      "autoAttachChildProcesses": true,
      "smartStep": true,
      "showAsyncStacks": true,
      "trace": false,
      "env": {
        "NODE_ENV": "development",
        "LOG_LEVEL": "debug",
        "DEBUG": "nerv:*,kernel:*,driver:*",
        "FORCE_COLOR": "1"
      },
      "console": "integratedTerminal",
      "outputCapture": "std",
      "internalConsoleOptions": "neverOpen"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "üìä Debug Dashboard (Enhanced)",
      "program": "${workspaceFolder}/src/server/main.js",
      "runtimeArgs": ["--max-old-space-size=1024"],
      "skipFiles": ["<node_internals>/**", "node_modules/**"],
      "sourceMaps": true,
      "resolveSourceMapLocations": ["${workspaceFolder}/**", "!**/node_modules/**"],
      "autoAttachChildProcesses": true,
      "smartStep": true,
      "showAsyncStacks": true,
      "env": {
        "NODE_ENV": "development",
        "PORT": "3008",
        "LOG_LEVEL": "debug",
        "DEBUG": "server:*",
        "FORCE_COLOR": "1"
      },
      "console": "integratedTerminal",
      "outputCapture": "std"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "üîß Debug Agente (Production Mode)",
      "program": "${workspaceFolder}/index.js",
      "runtimeArgs": ["--max-old-space-size=2048"],
      "skipFiles": ["<node_internals>/**", "node_modules/**"],
      "sourceMaps": true,
      "env": {
        "NODE_ENV": "production",
        "LOG_LEVEL": "info"
      },
      "console": "integratedTerminal",
      "outputCapture": "std"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "üß† Debug NERV Subsystem",
      "program": "${workspaceFolder}/index.js",
      "runtimeArgs": ["--max-old-space-size=2048"],
      "skipFiles": ["<node_internals>/**", "node_modules/**"],
      "sourceMaps": true,
      "autoAttachChildProcesses": true,
      "showAsyncStacks": true,
      "env": {
        "NODE_ENV": "development",
        "LOG_LEVEL": "debug",
        "DEBUG": "nerv:*,nerv:emit:*,nerv:receive:*,nerv:buffer:*"
      },
      "console": "integratedTerminal",
      "outputCapture": "std"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "‚öôÔ∏è Debug Kernel Engine",
      "program": "${workspaceFolder}/index.js",
      "runtimeArgs": ["--max-old-space-size=2048"],
      "skipFiles": ["<node_internals>/**", "node_modules/**"],
      "sourceMaps": true,
      "autoAttachChildProcesses": true,
      "showAsyncStacks": true,
      "env": {
        "NODE_ENV": "development",
        "LOG_LEVEL": "debug",
        "DEBUG": "kernel:*,execution:*,policy:*,runtime:*"
      },
      "console": "integratedTerminal",
      "outputCapture": "std"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "üéÆ Debug Driver (ChatGPT/Gemini)",
      "program": "${workspaceFolder}/index.js",
      "runtimeArgs": ["--max-old-space-size=2048"],
      "skipFiles": ["<node_internals>/**", "node_modules/**"],
      "sourceMaps": true,
      "autoAttachChildProcesses": true,
      "showAsyncStacks": true,
      "env": {
        "NODE_ENV": "development",
        "LOG_LEVEL": "debug",
        "DEBUG": "driver:*,puppeteer:*",
        "PUPPETEER_HEADLESS": "false"
      },
      "console": "integratedTerminal",
      "outputCapture": "std"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "üåä Debug Browser Pool",
      "program": "${workspaceFolder}/index.js",
      "runtimeArgs": ["--max-old-space-size=2048"],
      "skipFiles": ["<node_internals>/**", "node_modules/**"],
      "sourceMaps": true,
      "autoAttachChildProcesses": true,
      "showAsyncStacks": true,
      "env": {
        "NODE_ENV": "development",
        "LOG_LEVEL": "debug",
        "DEBUG": "pool:*,connection:*,health:*"
      },
      "console": "integratedTerminal",
      "outputCapture": "std"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "üîß Debug Boot Sequence",
      "program": "${workspaceFolder}/src/main.js",
      "runtimeArgs": ["--max-old-space-size=2048"],
      "skipFiles": ["<node_internals>/**", "node_modules/**"],
      "sourceMaps": true,
      "stopOnEntry": true,
      "autoAttachChildProcesses": true,
      "showAsyncStacks": true,
      "env": {
        "NODE_ENV": "development",
        "LOG_LEVEL": "debug",
        "DEBUG": "boot:*,config:*,identity:*"
      },
      "console": "integratedTerminal",
      "outputCapture": "std"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "üí• Debug Crash Recovery",
      "program": "${workspaceFolder}/index.js",
      "runtimeArgs": ["--max-old-space-size=2048"],
      "skipFiles": ["<node_internals>/**", "node_modules/**"],
      "sourceMaps": true,
      "autoAttachChildProcesses": true,
      "showAsyncStacks": true,
      "env": {
        "NODE_ENV": "development",
        "LOG_LEVEL": "debug",
        "DEBUG": "forensics:*,recovery:*,failure:*"
      },
      "console": "integratedTerminal",
      "outputCapture": "std"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "üîí Debug Lock Contention",
      "program": "${workspaceFolder}/index.js",
      "runtimeArgs": ["--max-old-space-size=2048"],
      "skipFiles": ["<node_internals>/**", "node_modules/**"],
      "sourceMaps": true,
      "autoAttachChildProcesses": true,
      "showAsyncStacks": true,
      "env": {
        "NODE_ENV": "development",
        "LOG_LEVEL": "debug",
        "DEBUG": "lock:*,orphan:*,contention:*"
      },
      "console": "integratedTerminal",
      "outputCapture": "std"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "üìä Debug Memory Profiling",
      "program": "${workspaceFolder}/index.js",
      "runtimeArgs": ["--max-old-space-size=2048", "--expose-gc", "--inspect-brk=9229"],
      "skipFiles": ["<node_internals>/**", "node_modules/**"],
      "sourceMaps": true,
      "autoAttachChildProcesses": true,
      "showAsyncStacks": true,
      "env": {
        "NODE_ENV": "development",
        "LOG_LEVEL": "info",
        "DEBUG": "memory:*,gc:*"
      },
      "console": "integratedTerminal",
      "outputCapture": "std",
      "port": 9229
    },
    {
      "type": "node",
      "request": "launch",
      "name": "üß™ Debug Current Test File",
      "program": "${file}",
      "cwd": "${workspaceFolder}",
      "runtimeArgs": ["--max-old-space-size=1024"],
      "skipFiles": ["<node_internals>/**", "node_modules/**"],
      "sourceMaps": true,
      "autoAttachChildProcesses": true,
      "showAsyncStacks": true,
      "env": {
        "NODE_ENV": "test",
        "LOG_LEVEL": "debug"
      },
      "console": "integratedTerminal"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "üß™ Debug P1 Fixes",
      "program": "${workspaceFolder}/tests/regression/test_p1_fixes.spec.js",
      "runtimeArgs": ["--max-old-space-size=1024"],
      "skipFiles": ["<node_internals>/**", "node_modules/**"],
      "sourceMaps": true,
      "autoAttachChildProcesses": true,
      "showAsyncStacks": true,
      "env": {
        "NODE_ENV": "test",
        "LOG_LEVEL": "debug"
      },
      "console": "integratedTerminal"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "üß™ Debug P2 Fixes",
      "program": "${workspaceFolder}/tests/regression/test_p2_fixes.spec.js",
      "runtimeArgs": ["--max-old-space-size=1024"],
      "skipFiles": ["<node_internals>/**", "node_modules/**"],
      "sourceMaps": true,
      "autoAttachChildProcesses": true,
      "showAsyncStacks": true,
      "env": {
        "NODE_ENV": "test",
        "LOG_LEVEL": "debug"
      },
      "console": "integratedTerminal"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "üß™ Debug P3 Fixes",
      "program": "${workspaceFolder}/tests/regression/test_p3_fixes.spec.js",
      "runtimeArgs": ["--max-old-space-size=1024"],
      "skipFiles": ["<node_internals>/**", "node_modules/**"],
      "sourceMaps": true,
      "autoAttachChildProcesses": true,
      "showAsyncStacks": true,
      "env": {
        "NODE_ENV": "test",
        "LOG_LEVEL": "debug"
      },
      "console": "integratedTerminal"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "üß™ Debug P4-P5 Fixes",
      "program": "${workspaceFolder}/tests/regression/test_p4_p5_fixes.spec.js",
      "runtimeArgs": ["--max-old-space-size=1024"],
      "skipFiles": ["<node_internals>/**", "node_modules/**"],
      "sourceMaps": true,
      "autoAttachChildProcesses": true,
      "showAsyncStacks": true,
      "env": {
        "NODE_ENV": "test",
        "LOG_LEVEL": "debug"
      },
      "console": "integratedTerminal"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "üß™ Debug Driver NERV",
      "program": "${workspaceFolder}/tests/integration/driver/test_driver_nerv.spec.js",
      "runtimeArgs": ["--max-old-space-size=1024"],
      "skipFiles": ["<node_internals>/**", "node_modules/**"],
      "sourceMaps": true,
      "autoAttachChildProcesses": true,
      "showAsyncStacks": true,
      "env": {
        "NODE_ENV": "test",
        "LOG_LEVEL": "debug",
        "DEBUG": "driver:*,nerv:*"
      },
      "console": "integratedTerminal"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "üß™ Debug Launcher Integration",
      "program": "${workspaceFolder}/tests/integration/test_launcher_integration.js",
      "runtimeArgs": ["--max-old-space-size=1024"],
      "skipFiles": ["<node_internals>/**", "node_modules/**"],
      "sourceMaps": true,
      "autoAttachChildProcesses": true,
      "env": {
        "NODE_ENV": "test",
        "LOG_LEVEL": "debug"
      },
      "console": "integratedTerminal"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "üß™ Debug Browser Connection",
      "program": "${workspaceFolder}/tests/integration/browser/test_connection_orchestrator.spec.js",
      "runtimeArgs": ["--max-old-space-size=1024"],
      "skipFiles": ["<node_internals>/**", "node_modules/**"],
      "sourceMaps": true,
      "autoAttachChildProcesses": true,
      "showAsyncStacks": true,
      "env": {
        "NODE_ENV": "test",
        "LOG_LEVEL": "debug",
        "DEBUG": "connection:*,pool:*"
      },
      "console": "integratedTerminal"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "‚ö° Debug CI Validation",
      "program": "${workspaceFolder}/scripts/validate-ci.js",
      "runtimeArgs": ["--max-old-space-size=512"],
      "skipFiles": ["<node_internals>/**", "node_modules/**"],
      "sourceMaps": true,
      "env": {
        "NODE_ENV": "development",
        "LOG_LEVEL": "debug"
      },
      "console": "integratedTerminal"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "üåê Debug Puppeteer Test",
      "program": "${workspaceFolder}/test-puppeteer.js",
      "runtimeArgs": ["--max-old-space-size=1024"],
      "skipFiles": ["<node_internals>/**", "node_modules/**"],
      "sourceMaps": true,
      "autoAttachChildProcesses": true,
      "showAsyncStacks": true,
      "env": {
        "NODE_ENV": "development",
        "LOG_LEVEL": "debug",
        "DEBUG": "puppeteer:*,connection:*",
        "PUPPETEER_HEADLESS": "false"
      },
      "console": "integratedTerminal"
    },
    {
      "type": "node",
      "request": "attach",
      "name": "üìå Attach to PM2 (9229)",
      "port": 9229,
      "restart": true,
      "skipFiles": ["<node_internals>/**", "node_modules/**"],
      "localRoot": "${workspaceFolder}",
      "remoteRoot": "${workspaceFolder}",
      "sourceMaps": true,
      "resolveSourceMapLocations": ["${workspaceFolder}/**", "!**/node_modules/**"],
      "autoAttachChildProcesses": true,
      "showAsyncStacks": true
    },
    {
      "type": "node",
      "request": "attach",
      "name": "üìå Attach to PM2 (9230)",
      "port": 9230,
      "restart": true,
      "skipFiles": ["<node_internals>/**", "node_modules/**"],
      "localRoot": "${workspaceFolder}",
      "remoteRoot": "${workspaceFolder}",
      "sourceMaps": true,
      "autoAttachChildProcesses": true
    },
    {
      "type": "node",
      "request": "attach",
      "name": "üê≥ Attach to Docker (9229)",
      "port": 9229,
      "address": "localhost",
      "restart": false,
      "skipFiles": ["<node_internals>/**", "node_modules/**"],
      "localRoot": "${workspaceFolder}",
      "remoteRoot": "/app",
      "sourceMaps": true,
      "resolveSourceMapLocations": ["${workspaceFolder}/**", "!**/node_modules/**"],
      "autoAttachChildProcesses": true,
      "showAsyncStacks": true
    },
    {
      "type": "node",
      "request": "attach",
      "name": "üê≥ Attach to Docker (9230)",
      "port": 9230,
      "address": "localhost",
      "restart": false,
      "skipFiles": ["<node_internals>/**", "node_modules/**"],
      "localRoot": "${workspaceFolder}",
      "remoteRoot": "/app",
      "sourceMaps": true,
      "autoAttachChildProcesses": true
    }
  ],
  "compounds": [
    {
      "name": "üöÄ Full System (Agent + Dashboard)",
      "configurations": ["üöÄ Debug Agente (Enhanced)", "üìä Debug Dashboard (Enhanced)"],
      "stopAll": true
    },
    {
      "name": "üß™ Regression Tests (P1-P5)",
      "configurations": ["üß™ Debug P1 Fixes", "üß™ Debug P2 Fixes", "üß™ Debug P3 Fixes", "üß™ Debug P4-P5 Fixes"],
      "stopAll": true
    },
    {
      "name": "üß™ Integration Tests",
      "configurations": ["üß™ Debug Driver NERV", "üß™ Debug Launcher Integration", "üß™ Debug Browser Connection"],
      "stopAll": true
    },
    {
      "name": "üîç Full Subsystems",
      "configurations": ["üß† Debug NERV Subsystem", "‚öôÔ∏è Debug Kernel Engine", "üéÆ Debug Driver (ChatGPT/Gemini)"],
      "stopAll": true
    },
    {
      "name": "‚ö° Critical Path (Boot + NERV + Kernel)",
      "configurations": ["üîß Debug Boot Sequence", "üß† Debug NERV Subsystem", "‚öôÔ∏è Debug Kernel Engine"],
      "stopAll": true
    }
  ]
}

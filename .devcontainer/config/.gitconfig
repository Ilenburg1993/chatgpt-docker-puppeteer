# =============================================================================
# .gitconfig - ChatGPT Docker Puppeteer DevContainer
# Version: 3.1 FINAL (23/01/2026)
# =============================================================================
#
# OBJETIVO:
# • Comportamento previsivel entre Windows / WSL2 / Linux
# • Line endings sempre LF (critico para container)
# • Aliases uteis para produtividade
# • Performance otimizada
# • VS Code integration
#
# ESTRATEGIA:
# • Sem identidade pessoal hardcoded (configurado em runtime)
# • Complementa .gitattributes (fonte canonica)
# • Aliases essenciais + produtividade
#
# CHANGELOG v3.1:
# • Nome consistente: ChatGPT Docker Puppeteer
# • Encoding UTF-8 limpo
#
# v3.0:
# • Consolidado versao minimalista + completa
# • VS Code integration, rerere, aliases expandidos
# • Line endings LF, performance configs
# • Template: user.name/email configurados por setup-devcontainer.sh
#
# =============================================================================

# -----------------------------------------------------------------------------
# User Identity (TEMPLATE - preenchido em runtime)
# -----------------------------------------------------------------------------
# Configurado automaticamente por setup-devcontainer.sh
# Se nao configurado, Git solicitara na primeira operacao
#
# [user]
#     name = Seu Nome
#     email = seu.email@example.com

# -----------------------------------------------------------------------------
# Core Behavior
# -----------------------------------------------------------------------------
[core]
	editor = vim
	pager = less -FRSX
	autocrlf = false
	filemode = false
	symlinks = true
	
	# Line endings (CRITICO para Windows/WSL2)
	eol = lf
	safecrlf = warn
	
	# Performance
	preloadindex = true
	fscache = true
	
	# Compression (balance performance/space)
	compression = 9
	looseCompression = 9
	packedGitLimit = 512m
	packedGitWindowSize = 512m

# -----------------------------------------------------------------------------
# Security
# -----------------------------------------------------------------------------
[safe]
	directory = *

# -----------------------------------------------------------------------------
# UI / Colors
# -----------------------------------------------------------------------------
[color]
	ui = auto
	branch = auto
	diff = auto
	status = auto
	interactive = auto

[color "branch"]
	current = yellow bold
	local = green
	remote = cyan

[color "diff"]
	meta = yellow bold
	frag = magenta bold
	old = red bold
	new = green bold
	whitespace = red reverse

[color "status"]
	added = green
	changed = yellow
	untracked = red
	deleted = red bold

# -----------------------------------------------------------------------------
# Branch / Pull / Rebase
# -----------------------------------------------------------------------------
[branch]
	autosetuprebase = always

[pull]
	rebase = true

[rebase]
	autoStash = true
	autoSquash = true

[status]
	short = true
	branch = true
	showStash = true
	submoduleSummary = true

# -----------------------------------------------------------------------------
# Diff / Merge
# -----------------------------------------------------------------------------
[diff]
	algorithm = histogram
	colorMoved = default
	renames = true
	mnemonicPrefix = true

[merge]
	conflictstyle = diff3
	tool = vscode

[mergetool "vscode"]
	cmd = code --wait --merge $REMOTE $LOCAL $BASE $MERGED

[difftool]
	prompt = false

[diff]
	tool = vscode

[difftool "vscode"]
	cmd = code --wait --diff $LOCAL $REMOTE

# -----------------------------------------------------------------------------
# Log
# -----------------------------------------------------------------------------
[log]
	date = iso
	abbrevCommit = true

# -----------------------------------------------------------------------------
# Push / Fetch
# -----------------------------------------------------------------------------
[push]
	default = simple
	autoSetupRemote = true
	followTags = false

[fetch]
	prune = true
	pruneTags = true
	parallel = 4

# -----------------------------------------------------------------------------
# Rerere (Reuse Recorded Resolution)
# -----------------------------------------------------------------------------
# Memoriza resolucoes de conflitos para reutilizar
[rerere]
	enabled = true
	autoUpdate = true

# -----------------------------------------------------------------------------
# Performance
# -----------------------------------------------------------------------------
[gc]
	auto = 256

[pack]
	threads = 0
	windowMemory = 256m

# -----------------------------------------------------------------------------
# Help
# -----------------------------------------------------------------------------
[help]
	autocorrect = prompt

# -----------------------------------------------------------------------------
# Credentials
# -----------------------------------------------------------------------------
[credential]
	helper = cache --timeout=3600

# -----------------------------------------------------------------------------
# Aliases (organizados por categoria)
# -----------------------------------------------------------------------------
[alias]
	# --- Status & Info ---
	s = status -sb
	st = status -sb
	info = remote show origin
	
	# --- Add ---
	a = add
	aa = add --all
	ap = add --patch
	
	# --- Commit ---
	c = commit
	cm = commit -m
	ca = commit --amend
	can = commit --amend --no-edit
	cane = commit --amend --no-edit
	
	# --- Checkout ---
	co = checkout
	cob = checkout -b
	com = checkout main
	cod = checkout develop
	
	# --- Branch ---
	b = branch
	ba = branch -a
	bd = branch -d
	bD = branch -D
	bm = branch -m
	
	# --- Log (visual e compacto) ---
	l = log --oneline --graph --decorate -10
	lg = log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit
	ll = log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit --all
	lp = log --oneline --graph --decorate --pretty=format:'%C(yellow)%h%Creset %C(cyan)%ad%Creset | %s %C(green)(%cr)%Creset %C(bold blue)<%an>%Creset' --date=short
	la = log --oneline --graph --decorate --all
	
	# --- Diff ---
	d = diff
	dc = diff --cached
	ds = diff --staged
	dw = diff --word-diff
	
	# --- Push / Pull ---
	p = push
	pl = pull
	pf = push --force-with-lease
	pu = push -u origin HEAD
	
	# --- Stash ---
	ss = stash save
	sl = stash list
	sp = stash pop
	sa = stash apply
	sd = stash drop
	sc = stash clear
	
	# --- Reset / Revert ---
	unstage = reset HEAD --
	undo = reset --soft HEAD~1
	
	# --- Remote ---
	r = remote -v
	
	# --- Utilities ---
	aliases = config --get-regexp alias
	last = log -1 HEAD --stat
	cleanup = !git branch --merged | grep -v '\\*' | xargs -n 1 git branch -d
	prune-local = !git fetch -p && git branch -vv | grep ': gone]' | awk '{print $1}' | xargs -r git branch -D
	
	# --- Assume unchanged (ignorar modificacoes temporariamente) ---
	assume = update-index --assume-unchanged
	unassume = update-index --no-assume-unchanged
	assumed = !git ls-files -v | grep ^h | cut -c 3-

# -----------------------------------------------------------------------------
# Include Local Config (sobrescreve configs acima)
# -----------------------------------------------------------------------------
# Permite customizacao sem modificar este arquivo
# Crie ~/.gitconfig.local para adicionar configs pessoais
[include]
	path = ~/.gitconfig.local

# =============================================================================
# USAGE NOTES
# =============================================================================
#
# User Identity:
#   Configurado automaticamente por setup-devcontainer.sh
#   Ou manualmente: git config --global user.name "Seu Nome"
#                   git config --global user.email "seu@email.com"
#
# VS Code Integration:
#   Merge tool: git mergetool
#   Diff tool:  git difftool file.js
#
# Rerere:
#   Memoriza resolucoes de conflitos
#   Primeira vez: resolve manualmente
#   Proximas vezes: aplica automaticamente
#
# Aliases Uteis:
#   git lg        - Log grafico bonito
#   git cleanup   - Remove branches ja merged
#   git aliases   - Lista todos aliases
#   git last      - Mostra ultimo commit
#
# Local Overrides:
#   Crie ~/.gitconfig.local para configs pessoais
#   Exemplo: [user]
#                name = Meu Nome
#                email = meu@email.com
#
# =============================================================================
